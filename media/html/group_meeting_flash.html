{% extends "media/html/_internal.html" %}
{% block content %}
<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" id="flash_list">
	{% for ppt in flash_list %}
		{% if ppt.year_start %}
		<div class="subpanel">
			<div id="heading{{ppt.date.year}}" role="tab" data-toggle="collapse" data-parent="#category{{ppt.date.year}}" href="#{{ppt.date.year}}" aria-expanded="true" aria-controls="{{ppt.date.year}}">
				<span class="icon glyphicon glyphicon-chevron-left pull-right" style="font-weight:bold; font-size:36px; color:#ddd; padding-top:40px;"></span>&nbsp;&nbsp;
				<span style="font-weight:bold; font-size:96px; color:#ddd;">{{ppt.date.year}}</span>
			</div>
			<div id="{{ppt.date.year}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{{ppt.date.year}}">
		{% endif %}

			{% if ppt.month_start %}
				{% if ppt.row_start %}
				<div class="row">
				{% endif %}
					<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
						<div class="panel panel-{{ppt.label}} month">
			            	<div class="panel-heading">
			            		<h3 class="panel-title"><b>{{ppt.date|date:"F"}}</b></h3>
			            	</div>
			            	<div class="well" style="border-top-left-radius:0px; border-top-right-radius:0px; border-top:0px;">
			{% endif %}

								<p class="center-block text-center">
									<a href="{{ppt.link}}" target="_blank">
										{{ppt.date|date:"b d"|title}}<sup>{{ppt.date|date:"S"}}</sup>
										<i>{{ppt.date|date:"(D)"|title}}</i>
									</a>
								</p>

			{% if ppt.month_end %}
							</div>
			            </div>
			        </div>
				{% if ppt.row_end %}
				</div>
				{% endif %}
			{% endif %}

			{% if ppt.year_end %}
			</div>
		</div>
			{% endif %}
	{% endfor %}
	</div>
</div>
{% endblock %}


{% block script %}
	<script type="text/javascript">
		$(document).ready(function() {
			$('.dropdown-toggle').removeClass("active");
			$("ul.breadcrumb").append('<li class="active"><span style="color: #000;" class="glyphicon glyphicon-blackboard"></span>&nbsp;&nbsp;Flash Slides</li>');
			$('#top').on('click', function () {
				$('html, body').stop().animate({scrollTop: $("#main").offset().top - 75}, 500);
			});

			$("#flash_list > div.subpanel:first > div.panel-collapse").collapse("show");

			$('div.panel-collapse').on('shown.bs.collapse', function () {
				$(this).prev().children().first().removeClass("glyphicon-chevron-left").addClass("glyphicon-chevron-down");

				$(this).children().each(function() {
					var max_height = 0, row = $(this);
					row.children().each(function() {
						var well = $(this).children().children().last();
						if (parseInt(well.css("height")) > max_height) { max_height = parseInt(well.css("height")); }
					});
					row.children().each(function() {
						var well = $(this).children().children().last();
						well.css("height", max_height.toString() + "px");
					});
				});
			});
			$('div.panel-collapse').on('hidden.bs.collapse', function () {
				$(this).prev().children().first().removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-left");
			});

		});
	</script>

{% endblock %}