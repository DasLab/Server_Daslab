{% extends "media/html/_external.html" %}

{% block header %}
  <script type="text/javascript">
    $(document).ready(function() {
      $("#main").addClass("DASnews");
      $("#nav-news").addClass("active");
    });
  </script>
{% endblock %}


{% block content %}
  <div id="DasBANNER" class="fix">
    <div id="DasHEADER" class="fix"><img src="/site_media/images/news/icon_news.png" width="349" height="111"></div>
    <img src="/site_media/images/news/logo_news.jpg" width="973" height="221">
  </div>

  <div class="TEXT BODY" id="newsBODY">
    <table width="855" height="820" border="0">
      <tbody>

        {% for news in news_list %}
        <tr {% if forloop.counter <= 10 %} class="current" {% else %} class="previous" {% endif %}>
          <td width="225" align="middle" valign="left">
            {% if news.image %} <img src="/site_data/news_img/{{news.image_link}}" width="190"> {% endif %}
            {% if news.video %} <iframe title="YouTube video player" class="youtube-player" type="text/html" width="160" src="{{news.video}}" frameborder="0" allowFullScreen></iframe> {% endif %}
          </td>
          <td width="500" align="left" valign="top" class="TEXT">
            <p class="yearTEXT"><i>{{news.date|date:"F d, Y"|title}}</i></p>
            <p class="TEXT">
              {% autoescape off %}{{news.content}}{% endautoescape %}
            </p>
          </td>
          <td height="160" align="right" valign="bottom">
            {% if news.link %}
            <a href="{{news.link}}" target="_blank" class="btn_readmore">
              <img src="/site_media/images/news/read_more.png" width="121" height="32" border="0" id="read more2{{forloop.counter}}">
            {% endif %}
            </a>
          </td>
        </tr>
        <tr {% if forloop.counter == news_list|length %} class="last previous" {% elif forloop.counter == 10 %} class="middle current" {% elif forloop.counter < 10 %} class="current" {% else %} class="previous" {% endif %}>
          <td height="20" colspan="3"><div class="divisionLine"></div></td>
        </tr>
        {% if forloop.counter == 10 %}
          <tr class="switch">
            <td width="38" height="15" align="left" valign="middle" class="publicationsH1"><a id="arrow"><img src="/site_media/images/publications/arrow.png" width="28" height="28" border="0" /></a></td>
            <td height="15" align="left" valign="middle" class="HEAD publicationsH1">Previous news from the Das Lab.</strong></td>
          </tr>
          <tr class="switch">
            <td height="20" colspan="3"><div class="divisionLine"></div></td>
          </tr>
        {% endif %}

        {% endfor %}

      </tbody>
    </table>
  </div>
{% endblock %}


{% block script %}
  <script type="text/javascript">
    function sign(x){return x>0?1:x<0?-1:x;}

    $(document).ready(function() {
      $("#main").addClass("DASnews");
      $("#nav-news").addClass("active");

      $("tr.previous").hide();
      $(".btn_readmore").hover(function () {
        $(this).children().attr("src", "/site_media/images/news/read_more_hover.png");
      }, function () {
        $(this).children().attr("src", "/site_media/images/news/read_more.png");
      });
      $("#arrow").hover(function () {
        $(this).children().attr("src", "/site_media/images/publications/arrow_hover.png");
      }, function () {
        $(this).children().attr("src", "/site_media/images/publications/arrow.png");
      });

      $("#DasFOOTER").css({"top": $("tr.middle").offset().top + 200, "display": "inline"});
      $("#DasICON").css({"top": parseInt($("#DasFOOTER").css("top")) + 55, "display": "inline"});
      $(".DASnews").css("height", parseInt($("#DasFOOTER").css("top")) + 150);

      $("#arrow").on("click", function () {
        $("tr.previous").toggle();
        var flag = sign(($("tr.previous").css("display") == "none") - 0.5);

        if (flag == -1) {
          $("#arrow").attr("src", "/site_media/images/publications/collapse_hover.png");
          $("#arrow").hover(function () {
            $(this).children().attr("src", "/site_media/images/publications/collapse_hover.png");
          }, function () {
            $(this).children().attr("src", "/site_media/images/publications/collapse.png");
          });
          $("#DasFOOTER").css("top", $("tr.last").offset().top + 200);
        } else {
          $("#arrow").attr("src", "/site_media/images/publications/arrow.png");
          $("#arrow").hover(function () {
            $(this).children().attr("src", "/site_media/images/publications/arrow_hover.png");
          }, function () {
            $(this).children().attr("src", "/site_media/images/publications/arrow.png");
          });
          $("#DasFOOTER").css("top", $("tr.middle").offset().top + 200);
        }
        $("#DasICON").css("top", parseInt($("#DasFOOTER").css("top")) + 55);
        $(".DASnews").css("height", parseInt($("#DasFOOTER").css("top")) + 150);
      });

    });
  </script>
{% endblock %}

