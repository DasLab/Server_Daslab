{% extends "admin/base.html" %}
{% load i18n admin_static %}

{% block bodyclass %}dashboard{% endblock %}

{% block content %}
	<div id="content-main">
		<div class="col-md-2"></div>
		<div class="col-md-6">
			<table class="table table-overview applist">
				<tr>
	                <th scope="row"><b><span class="glyphicon glyphicon-globe"></span> Link</th>
	                <td class="active"><a href="/server-status/" class="addlink icon">http://daslab.stanford.edu/server-status/</a></td>
	                <td class="active"><span class="glyphicon glyphicon-lock"></span> Apache Autherization Required</td>
	              </tr>
			</table>
		</div>
		<div class="col-md-4"><u>(Page Refreshes Every 3 <i>s</i>)</u></div>
		
		<div class="row">
			<div class="col-md-12">
				<div class="thumbnail" style="padding:20px;">
					<h1 id="apache_title">Apache Server Status</h1>

					<div class="row">
						<div class="col-md-6">
							<div class="thumbnail" style="margin:0px 20px 0 px 0px; padding:20px; float:none;">
								<table class="table" style="margin-bottom:0px;">
									<thead>
										<tr><th class="col-md-4"></th><th class="col-md-8"></th></tr>
									</thead>
									<tbody>
										<tr>
											<td class="text-right"><span class="label label-inverse">Current Time</span></td>
											<td id="apache_current_time"></td>
										</tr>
										<tr>
											<td class="text-right"><span class="label label-primary">Build Time</span></td>
											<td id="apache_build_time"></td>
										</tr>
										<tr>
											<td class="text-right"><span class="label label-primary">Restart Time</span></td>
											<td id="apache_restart_time"></td>
										</tr>
										<tr>
											<td class="text-right"><span class="label label-success">Up Time</span></td>
											<td id="apache_up_time"></td>
										</tr>
										<tr><td></td><td></td></tr>
									</tbody>
								</table>
								<table class="table" style="margin-bottom:0px;">
									<thead>
										<tr>
											<th class="col-md-2"></th><th class="col-md-2"></th><th class="col-md-2"></th>
											<th class="col-md-2"></th><th class="col-md-2"></th><th class="col-md-2"></th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td class="text-right"><span class="label label-info">Total Access</span></td>
											<td id="apache_total_access"></td>
											<td class="text-right"><span class="label label-orange">Server Load</span></td>
											<td colspan="3" id="apache_server_load"></td>
										</tr>
										<tr>
											<td class="text-right"><span class="label label-danger">CPU Load</span></td>
											<td id="apache_cpu_load"></td>
											<td class="text-right"><span class="label label-danger">CPU Usage</span></td>
											<td colspan="3" id="apache_cpu_usage"></td>
										</tr>
										<tr>
											<td class="text-right"><span class="label label-warning">Traffic</span></td>
											<td colspan="5" id="apache_traffic"></td>
										</tr>
										<tr>
											<td class="text-right"><span class="label label-warning">Total Traffic</span></td>
											<td id="apache_total_traffic"></td>
											<td class="text-right"><span class="label label-green">MPM</span></td>
											<td id="apache_mpm"></td>
											<td class="text-right"><span class="label label-default	">Port</span></td>
											<td id="apache_port"></td>
										</tr>
										<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
									</tbody>
								</table>
								<table class="table" style="margin-bottom:0px;">
									<thead>
										<tr>
											<th class="col-md-2"></th><th class="col-md-2"></th><th class="col-md-2"></th>
											<th class="col-md-2"></th><th class="col-md-2"></th><th class="col-md-2"></th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td class="text-right"><span class="label label-default">Apache</span></td>
											<td id="apache_ver"></td>
											<td class="text-right"><span class="label label-violet">mod_wsgi</span></td>
											<td id="apache_wsgi"></td>
											<td class="text-right"><span class="label label-teal">Python</span></td>
											<td id="apache_python"></td>
										</tr>
										<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
									</tbody>
								</table>
							</div>
						</div>

						<div class="col-md-6">
							<div class="well" style="margin:0px 0px 0 px 20px; padding:20px;">
								<div class="row">
									<div class="col-md-6">
										<table class="table" style="margin-bottom:0px;">
											<thead>
												<tr><th class="col-md-4"></th><th class="col-md-2"></th><th class="col-md-4"></th><th class="col-md-2"></th></tr>
											</thead>
											<tbody>
												<tr>
													<td class="text-right"><span class="label label-dark-red">Processing</span></td>
													<td id="apache_process"></td>
													<td class="text-right"><span class="label label-teal">Idle</span></td>
													<td id="apache_idle"></td>
												</tr>
												<tr><td></td><td></td><td></td><td></td></tr>
											</tbody>
										</table>
									</div>
								</div>

								<code id="apache_worker" style="word-wrap: wrap;">....w___wwww</code>
								<table class="table" style="margin-bottom:0px;">
									<thead>
										<tr><th class="col-md-1"></th><th class="col-md-5"></th><th class="col-md-1"></th><th class="col-md-5"></th></tr>
									</thead>
									<tbody>
										<tr>
											<td><span class="label label-inverse">_</span></td><td> Waiting for Connection</td>
											<td><span class="label label-default">S</span></td><td> Starting up</td>
										</tr>
										<tr>
											<td><span class="label label-violet">R</span></td><td> Reading Request</td>
											<td><span class="label label-info">W</span></td><td> Sending Reply</td>
										</tr>
										<tr>
											<td><span class="label label-success">K</span></td><td> Keepalive (read)</td>
											<td><span class="label label-warning">D</span></td><td> DNS Lookup</td>
										</tr>
										<tr>
											<td><span class="label label-danger">C</span></td><td> Closing Connection</td>
											<td><span class="label label-orange">L</span></td><td> Logging</td>
										</tr>
										<tr>
											<td><span class="label label-green">G</span></td><td> Gracefully Finishing</td>
											<td><span class="label label-brown">I</span></td><td> Idle Cleanup of Worker</td>
										</tr>
										<tr>
											<td><span class="label label-primary">.</span></td><td> Open Slot with NO Current Process</td>
											<td></td><td></td>
										</tr>
										<tr><td></td><td></td><td></td><td></td></tr>
									</tbody>
								</table>
							</div>	
						</div>
					</div>

					<div class="row">
						<div class="col-md-12">
							<div class="well" style="margin:0px 0px 0 px 20px; padding:20px;">
								<table class="table" style="margin-bottom:0px;">
									<thead>
										<tr>
											<th data-toggle="tooltip" data-placement="top" title="Child Server Number - Generation">Srv</th>
											<th data-toggle="tooltip" data-placement="top" title="OS Process ID">PID</th>
											<th data-toggle="tooltip" data-placement="top" title="Number of Accesses This Connection / This Child / This Slot">Acc</th>
											<th data-toggle="tooltip" data-placement="top" title="Mode of Operation">Mode</th>
											<th data-toggle="tooltip" data-placement="top" title="CPU Usage (Seconds)">CPU</th>
											<th data-toggle="tooltip" data-placement="top" title="Time since Beginning of Most Recent Request (Seconds)">SS</th>
											<th data-toggle="tooltip" data-placement="top" title="Time Required to Process Most Recent Request (Milliseconds)">Req</th>
											<th data-toggle="tooltip" data-placement="top" title="Size Transferred by This Connection (Kilobytes)">Conn</th>
											<th data-toggle="tooltip" data-placement="top" title="Size Transferred by This Child (Megabytes)">Child</th>
											<th data-toggle="tooltip" data-placement="top" title="Total Size Transferred by This Slot (Megabytes)">Slot</th>
											<th>Client</th><th>Virtual Host</th><th>Request</th>
										</tr>
									</thead>
									<tbody id="apache_client"></tbody>
								</table>
							</div>
						</div>
					</div>


				</div>
			</div>
		</div>
	</div>

{% endblock %}


{% block extrajs %}
  <script type="text/javascript" src="/site_media/admin/js/custom/apache.js"></script>
{% endblock %}

